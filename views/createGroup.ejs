<!DOCTYPE html>
<html>
<head>
	<link rel='stylesheet' href='/stylesheets/style.css' />
	<link rel="stylesheet"href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />
	<script>
			var facepro = angular.module('Facepro', []);
			var members=[];
				function addMember(firstname,email,id){
					members.push({firstname:firstname,email:email});
				}
			facepro.controller('createGroupController', function($scope, $http) {
				$scope.submit = function() {
					var groupName=$scope.groupname;
					if(groupName=="" || groupName==undefined){
						document.getElementById("groupname").style.background="#ED2939";
						alert("Please enter group name");
						return false;
					}
					$http({
						method : "POST",
						url : '/createGroup',
						data : {
							"members" : members,
							"groupName":$scope.groupname
						}
					}).success(function(data) {
						if (data.status == 'fail') {
							alert(data.msg);
						}
						else if(data.status=='success'){
							alert(data.msg);
							window.location.assign("/groups");
						} 
					}).error(function(error) {
						alert("error");
					});
				};
			});
	</script>
	<title>Facepro</title>
</head>
<body ng-app="Facepro">
	<nav class="navbar navbar-default" style=" background-color: #3b5998;margin-bottom:0px;">
		<div class="col-md-1">
				
		</div>
		<div class="col-md-10">
			<label style="margin-top: 0px;font-size:28px;color:white;float:left" class="loginpageText"><a href="/homepage" style="color:white" class="facepro_homepage_click">facepro</a></label>
				<div class="wrapper" style="float:left;margin-top:10px">
				<form action="searchUser" method="POST">
				<input type="text" name="search" id="search" ng-model="search" style="width:370px;height:20px"/>
				<button class="loginpageText _searchbox"><img src="/images/login_page_images/search.png" width="15" height="15"></img></button>
				</form>
				</div>
				<div>
					<label style="font-weight:normal;margin-left: 150px;margin-top: 10px;font-size:16px;color:white;float:left" class="loginpageText"><a href="/viewProfile" style="color:white"><input type="button" value="<%=username%>" class="homepageButton"/></a>&nbsp;&nbsp;&nbsp;</label>
				</div>
				<div>
					<label style="font-weight:normal;margin-top: 10px;font-size:16px;color:white;float:left" class="loginpageText"><a href="/homepage" style="color:white"><input type="button" value="Home" class="homepageButton"/></a>&nbsp;&nbsp;</label>
				</div>
				<div style="float:left;margin-top: 8px;">
					<table cell-padding="10" cell-spacing="10">
						<tbody>
							<tr><td><img src="/images/login_page_images/friends.png" width="33" height="31"></img></td><td></td>
							<td><img src="/images/login_page_images/message.png" width="28" height="31"></img></td><td></td>
							<td><img src="/images/login_page_images/notifications.png" width="28" height="31"></img></td>
							<td>&nbsp;&nbsp;&nbsp;</td>
							<td><img src="/images/login_page_images/privacy.png" width="15" height="18"></img>&nbsp;
							</td>
							<td>
							
							</td>
							
							
							</tr>
						</tbody>
					</table>
				</div>
				<div>
					<form action="logout" method="post">
							<label style="font-weight:normal;margin-top: 10px;font-size:16px;color:white;float:left" class="loginpageText"><input type="submit" value="Logout" class="homepageButton"/>&nbsp;&nbsp;</label>
							</form>
				</div>
		</div>
		<div class="col-md-1">
		
		</div>
	</nav>
	<nav class="navbar navbar-default" style=" background-color: #F5F5F5;margin-bottom:0px;height:600px">
		<div class="col-md-1">
		
		</div>
		<div class="col-md-1" style="margin-top:5px" >
			<table class="homepage_lefttab">
				<!--<ul class="homepage_left_ul" style="margin-top:100px;">
				<li><a href="/viewProfile"><%=username%></a></li>
				<li><a href="/editProfile">Edit Profile</a></li>-->
				<tr><td><img src="/images/user.png" width="17" height="18"></img></td><td><label><a href="/viewProfile" style="color:black"><%=username%></a></td></tr>
				<tr><td><img src="/images/updateStatus.png"></img></td><td><label><a href="/editProfile" style="color:black">Edit Profile</a></td></tr>
			<!--</ul>-->
			</table>
			<label style="font-size:12px;color:#C0C0C0">FAVORITES</label>
			<table class="homepage_lefttab">
			<!--<ul class="homepage_left_ul">
				<li><a href="/homepage">News Feed</a></li>
				<li><a href="">Messages</a></li>
				<li><a href="">Events</a></li>-->
				<tr><td><img src="/images/newsfeed.png"></img></td><td><label><a href="/homepage">News Feed</a></label></td></tr>
				<tr><td><img src="/images/messages.png"></img></td><td><label><a href="">Messages</a></label></td></tr>
				<tr><td><img src="/images/events.png"></img></td><td><label><a href="">Events</a></label></td></tr>
			<!--</ul>-->
			</table>
			<table class="homepage_lefttab">
			<label style="font-size:12px;color:#C0C0C0"><a href="/groups" style="color:#C0C0C0">GROUPS</a></label>
				<%if(groups.length>0){
					for(var i=0;i<groups.length;i++){%>
						<tr><td><img src="/images/group_icon.png"></img></td><td><label><a href="viewGroup?groupName=<%=groups[i].groupname%>"><%=groups[i].groupname%></a></label></td></tr>
					<%}
				}%>
				<tr><td><img src="/images/create_new_group.png"></img></td><td><label><a href="/createGroup">Create Group</a></label></td></tr>
			</table>
		</div>
		<div class="col-md-6">
			<nav class="navbar navbar-default" style=" background-color: #F5F5F5;margin-bottom:0px;margin-top:25px">
			<form ng-controller="createGroupController" id="createGroup" ng-submit="submit();">
				Group Name&nbsp;&nbsp;:&nbsp;&nbsp;<input type="text" class="form-control input-sm" value="" name="groupname" id="groupname" placeholder="group name" ng-model="groupname" style="width:180px"/>
				<table width="200" class="table table-striped">
				<% for(var i=0;i<friendsList.length;i++){%>
				<tr>
				<td><%=friendsList[i].firstname%></td>
				<td><input type="button" id='friend<%=i%>' class="btn btn-default" onclick="this.disabled=true;addMember('<%=friendsList[i].firstname%>','<%=friendsList[i].friendEmailID%>','friend<%=i%>')" value="Add Member"/></td></tr>
				<%}%>
				</table>
				<input type="submit" class="btn btn-default" value="Create Group"/>
			</form>
			</nav>
		</div>
		<div class="col-md-4">
		
		</div>
	</nav>
</body>
</html>